\chapter{Arrays of Objects}

\begin{exercise}
Consider this UML diagram for a \java{City} class in Figure~\ref{fig.cityuml}

\begin{figure}[!h]
\begin{center}
\includegraphics[scale=0.5]{figs/ch12/city.png}
\caption{UML Diagram for a City class}
\label{fig.cityuml}
\end{center}
\end{figure}

The class has private instance variables for the city name, its region (for the US, it's called a state; for Canada, it's a province; for Japan it's a prefecture), and its latitude and longitude measured in degrees.

This is an immutable class. (How would you determine this from the UML diagram?)

\java{RADIUS_KM} is a \java{static} \java{final} constant representing the radius of the earth in kilometers.

The constructor will make sure that the longitude is in the range -180 to 180 and the latitude in the range -90 to 90. The constructor will use the \java{clamp} method to enforce this:

\begin{code}
private static double clamp(double value, double min, double max) {
    double result = value;
    if (value <  min) {
        result = min;
    }
    else if (value > max) {
        result = max;
    }
    return result;
}
\end{code}


Question: why do you think this method was declared \java{private} instead of \java{public}? Why is it a \java{static} method instead of an instance method?

The \java{toString} method will display the information about the city; it can display the latitude and longitude as positive and negative numbers, or by using N, S, E, and W as abbreviations for north, south, east, and west. Display them to one decimal point. (Hint: \java{"\\u00b0"} is the degree symbol.) For example:

\begin{stdout}
San Jose, CA, USA: 37.3째, -121.9째
San Jose, CA, USA: 37.3째N, 121.9째W
\end{stdout}


The \java{distance} method will calculate the great circle distance between one \java{City} object and the \java{other} \java{City} object. Here is the formula where $r$ is the radius of earth in kilometers (6371.009), the first city's latitude and longitude are $lat_1$, $lon_1$ and the second city's latitude and longitude are  $lat_2$, $lon_2$:

\begin{equation*}
d = r\cdot cos^{-1}(sin(lat_1)\cdot sin(lat_2) + cos(lat_1)\cdot cos(lat_2)\cdot cos(lon_1 - lon_2))
\end{equation*}

The \java{main} method will set up an array of these \java{City} objects:

\begin{tabular}{|l|l|l|r|r|}
\hline
City & Region & Country & Latitude & Longitude \\ \hline
Antananarivo & Analamanga & MG & -18.93 & 47.52 \\ \hline
Brasilia & Distrito Federal & BR & -15.79 & -47.88 \\ \hline
Lima & Lima & PE & -12.05 & -77.03 \\ \hline
Mumbai & Maharashtra & IN & 19.08 & 72.88 \\ \hline
San Jose & California & US & 37.34 & -121.89 \\ \hline
Yokohama & Kanagawa & JP & 35.44 & 139.64 \\ \hline

\end{tabular}


\end{exercise}
